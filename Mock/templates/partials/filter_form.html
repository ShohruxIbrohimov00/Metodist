<!-- DESKTOP FILTER DROPDOWN – KICHIK VA CHIROYLIC -->
<div id="desktop-filter-dropdown" class="hidden md:block absolute right-0 top-14 w-80 bg-white rounded-2xl shadow-2xl border border-slate-100 z-50 overflow-hidden">
    
    <!-- Kichik strelka -->
    <div class="absolute -top-3 right-6 w-0 h-0 
                border-l-8 border-r-8 border-b-8 
                border-transparent border-b-white shadow-lg"></div>

    <div class="p-4 bg-gradient-to-b from-indigo-50 to-white">
        <h4 class="text-center font-extrabold text-indigo-700 text-sm uppercase tracking-wider mb-3">
            Filtrlash
        </h4>

        <form method="GET" class="space-y-4">

            <!-- Imtihon turi + Narx – yonma-yon, juda ixcham -->
            <div class="grid grid-cols-2 gap-3">

                <!-- Imtihon turi -->
                <div>
                    <p class="text-[10px] font-bold text-slate-500 uppercase mb-1.5 tracking-widest">Turi</p>
                    <div class="space-y-1.5">
                        <label class="flex items-center justify-center py-1.5 px-2 rounded-lg text-xs font-semibold cursor-pointer transition-all {% if not filter_type or filter_type == 'all' %}bg-indigo-600 text-white shadow-sm{% else %}bg-slate-100 hover:bg-slate-200 text-slate-700{% endif %}">
                            <input type="radio" name="type" value="all" class="hidden" {% if not filter_type or filter_type == 'all' %}checked{% endif %}>
                            Barchasi
                        </label>
                        <label class="flex items-center justify-center py-1.5 px-2 rounded-lg text-xs font-semibold cursor-pointer transition-all {% if filter_type == 'mock' %}bg-indigo-600 text-white shadow-sm{% else %}bg-slate-100 hover:bg-slate-200 text-slate-700{% endif %}">
                            <input type="radio" name="type" value="mock" class="hidden" {% if filter_type == 'mock' %}checked{% endif %}>
                            Mock
                        </label>
                        <label class="flex items-center justify-center py-1.5 px-2 rounded-lg text-xs font-semibold cursor-pointer transition-all {% if filter_type == 'topic' %}bg-indigo-600 text-white shadow-sm{% else %}bg-slate-100 hover:bg-slate-200 text-slate-700{% endif %}">
                            <input type="radio" name="type" value="topic" class="hidden" {% if filter_type == 'topic' %}checked{% endif %}>
                            Mavzu
                        </label>
                    </div>
                </div>

                <!-- Narx -->
                <div>
                    <p class="text-[10px] font-bold text-slate-500 uppercase mb-1.5 tracking-widest">Narxi</p>
                    <div class="space-y-1.5">
                        <label class="flex items-center justify-center py-1.5 px-2 rounded-lg text-xs font-semibold cursor-pointer transition-all {% if not filter_price or filter_price == 'all' %}bg-purple-600 text-white shadow-sm{% else %}bg-slate-100 hover:bg-slate-200 text-slate-700{% endif %}">
                            <input type="radio" name="price" value="all" class="hidden" {% if not filter_price or filter_price == 'all' %}checked{% endif %}>
                            Hammasi
                        </label>
                        <label class="flex items-center justify-center py-1.5 px-2 rounded-lg text-xs font-semibold cursor-pointer transition-all {% if filter_price == 'free' %}bg-emerald-600 text-white shadow-sm{% else %}bg-slate-100 hover:bg-slate-200 text-slate-700{% endif %}">
                            <input type="radio" name="price" value="free" class="hidden" {% if filter_price == 'free' %}checked{% endif %}>
                            Bepul
                        </label>
                        <label class="flex items-center justify-center py-1.5 px-2 rounded-lg text-xs font-semibold cursor-pointer transition-all {% if filter_price == 'premium' %}bg-amber-600 text-white shadow-sm{% else %}bg-slate-100 hover:bg-slate-200 text-slate-700{% endif %}">
                            <input type="radio" name="price" value="premium" class="hidden" {% if filter_price == 'premium' %}checked{% endif %}>
                            Premium
                        </label>
                    </div>
                </div>

            </div>

            <!-- Tugmalar – kichik va chiroyli -->
            <div class="flex gap-2 pt-2 border-t border-slate-200">
                <button type="button" 
                        onclick="window.location.href=window.location.pathname" 
                        class="flex-1 py-2 bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 rounded-xl text-xs font-bold hover:from-gray-200 hover:to-gray-300 transition shadow-sm">
                    Tozalash
                </button>
                <button type="submit" 
                        class="flex-1 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl text-xs font-bold hover:from-indigo-700 hover:to-purple-700 transition shadow-lg transform hover:scale-[1.02]">
                    Qo‘llash
                </button>
            </div>
        </form>
    </div>
</div>
<!-- Mobil panel -->
<div id="mobile-filter-panel" class="hidden fixed inset-0 z-50 md:hidden">
    <div class="fixed inset-0 bg-black/60" onclick="document.getElementById('mobile-filter-panel').classList.add('hidden'); document.body.style.overflow=''"></div>
    <div class="absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl p-6 max-h-[85vh] overflow-y-auto">
        <div class="w-12 h-1 bg-gray-300 rounded-full mx-auto mb-6"></div>
        <h3 class="text-center font-bold text-gray-800 mb-5 text-lg">Filtrlash</h3>

        <form method="GET" class="space-y-5">
            <div>
                <p class="text-center text-xs font-bold text-gray-500 uppercase mb-3">Imtihon turi</p>
                <div class="space-y-3">
                    <label class="block text-center py-3 px-6 rounded-xl cursor-pointer transition-all font-medium {% if not filter_type or filter_type == 'all' %}bg-blue-600 text-white{% else %}bg-gray-100 hover:bg-gray-200 text-gray-700{% endif %}">
                        <input type="radio" name="type" value="all" class="hidden" {% if not filter_type or filter_type == 'all' %}checked{% endif %}> Barchasi
                    </label>
                    <label class="block text-center py-3 px-6 rounded-xl cursor-pointer transition-all font-medium {% if filter_type == 'mock' %}bg-blue-600 text-white{% else %}bg-gray-100 hover:bg-gray-200 text-gray-700{% endif %}">
                        <input type="radio" name="type" value="mock" class="hidden" {% if filter_type == 'mock' %}checked{% endif %}> SAT Mock
                    </label>
                    <label class="block text-center py-3 px-6 rounded-xl cursor-pointer transition-all font-medium {% if filter_type == 'topic' %}bg-blue-600 text-white{% else %}bg-gray-100 hover:bg-gray-200 text-gray-700{% endif %}">
                        <input type="radio" name="type" value="topic" class="hidden" {% if filter_type == 'topic' %}checked{% endif %}> Mavzu Testi
                    </label>
                </div>
            </div>

            <div>
                <p class="text-center text-xs font-bold text-gray-500 uppercase mb-3">Narxi</p>
                <div class="space-y-3">
                    <label class="block text-center py-3 px-6 rounded-xl cursor-pointer transition-all font-medium {% if not filter_price or filter_price == 'all' %}bg-slate-700 text-white{% else %}bg-gray-100 hover:bg-gray-200 text-gray-700{% endif %}">
                        <input type="radio" name="price" value="all" class="hidden" {% if not filter_price or filter_price == 'all' %}checked{% endif %}> Hammasi
                    </label>
                    <label class="block text-center py-3 px-6 rounded-xl cursor-pointer transition-all font-medium {% if filter_price == 'free' %}bg-emerald-600 text-white{% else %}bg-gray-100 hover:bg-gray-200 text-gray-700{% endif %}">
                        <input type="radio" name="price" value="free" class="hidden" {% if filter_price == 'free' %}checked{% endif %}> Bepul
                    </label>
                    <label class="block text-center py-3 px-6 rounded-xl cursor-pointer transition-all font-medium {% if filter_price == 'premium' %}bg-amber-600 text-white{% else %}bg-gray-100 hover:bg-gray-200 text-gray-700{% endif %}">
                        <input type="radio" name="price" value="premium" class="hidden" {% if filter_price == 'premium' %}checked{% endif %}> Pullik
                    </label>
                </div>
            </div>

            <div class="flex gap-3 pt-4">
                <button type="button" onclick="window.location.href=window.location.pathname" class="flex-1 py-3 bg-gray-200 text-gray-700 rounded-xl font-bold hover:bg-gray-300">
                    Tozalash
                </button>
                <button type="submit" class="flex-1 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 shadow">
                    Qo‘llash
                </button>
            </div>
        </form>
    </div>
</div>