{% extends 'registration_base.html' %}
{% load static %}

{% block title %}Parolni o'zgartirish{% endblock %}

{% block content %}
<div class="container mx-auto py-12 px-4">
    <div class="max-w-md mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">
        <div class="bg-gradient-to-r from-indigo-600 to-purple-600 p-8 text-center">
            <h2 class="text-3xl font-extrabold text-white">Parolni Yangilash</h2>
            <p class="text-white/80 mt-2">Yangi va xavfsiz parol o'rnating</p>
        </div>

        <div class="p-8">
            {% if messages %}
                {% for message in messages %}
                    <div class="mb-6 p-4 rounded-xl text-sm font-medium {% if message.tags == 'success' %}bg-green-100 text-green-700{% else %}bg-red-100 text-red-700{% endif %}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}

            <form method="POST" class="space-y-6">
                {% csrf_token %}

                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Joriy parol</label>
                    {{ form.old_password }}
                    {% if form.old_password.errors %}
                        <p class="text-red-600 text-xs mt-1">{{ form.old_password.errors.0 }}</p>
                    {% endif %}
                </div>

                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Yangi parol</label>
                    {{ form.new_password1 }}
                    {% if form.new_password1.errors %}
                        <p class="text-red-600 text-xs mt-1">{{ form.new_password1.errors.0 }}</p>
                    {% endif %}
                </div>

                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Yangi parolni tasdiqlash</label>
                    {{ form.new_password2 }}
                    {% if form.new_password2.errors %}
                        <p class="text-red-600 text-xs mt-1">{{ form.new_password2.errors.0 }}</p>
                    {% endif %}
                </div>

                <div class="flex gap-3 pt-6">
                    <a href="{% url 'profile' %}" class="flex-1 text-center py-3 border border-gray-300 rounded-xl font-medium hover:bg-gray-50 transition">
                        Bekor qilish
                    </a>
                    <button type="submit" class="flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold py-3 rounded-xl hover:shadow-lg transition">
                        Saqlash
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}